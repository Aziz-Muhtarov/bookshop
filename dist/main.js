(()=>{"use strict";class t{constructor({containerSelector:t,dotSelector:e,interval:s=5e3}){this.carouselContainer=document.querySelector(t),this.slides=this.carouselContainer.querySelectorAll("img"),this.dots=document.querySelectorAll(e),this.currentIndex=0,this.totalSlides=this.slides.length,this.interval=s,this.timer=null,this.init()}init(){this.updateSlide(0),this.setupEventListeners(),this.startCarousel()}updateSlide(t){this.currentIndex=t,this.carouselContainer.style.transform=`translateX(-${100*this.currentIndex}%)`,this.updateDots()}updateDots(){this.dots.forEach(((t,e)=>{t.classList.toggle("active",e===this.currentIndex)}))}setupEventListeners(){this.dots.forEach((t=>{t.addEventListener("click",(()=>{const e=Number(t.getAttribute("data-index"));this.updateSlide(e),this.resetTimer()}))}))}startCarousel(){this.timer=setInterval((()=>{this.currentIndex=(this.currentIndex+1)%this.totalSlides,this.updateSlide(this.currentIndex)}),this.interval)}stopCarousel(){clearInterval(this.timer)}resetTimer(){this.stopCarousel(),this.startCarousel()}}const e="AIzaSyAkmf3qkRoL5lhVfITJvNlcENkhIVVC-74",s=`https://www.googleapis.com/books/v1/volumes?q="subject:Business"&key=${e}&printType=books&startIndex=0&maxResults=6&langRestrict=en`;class r{constructor({id:t,title:e,authors:s,description:r,imageLinks:i,price:n,currencyCode:o,categories:c,ratingsCount:a}){this.id=t,this.title=e,this.authors=s||"Unknown Author",this.description=r||"No description available.",this.image=i?.thumbnail||"https://placehold.co/212x300",this.price=n||"N/A",this.currency=o||"",this.categories=c||[],this.rating=a||0}render(){const t=document.createElement("div");return t.classList.add("book-card"),t.setAttribute("data-id",this.id),t.innerHTML=`\n        <img src="${this.image}" alt="Book cover" class="book-card__image" />\n        <div class="book-card__details">\n          <h3>${this.title}</h3>\n          <p>${this.authors}</p>\n          <p class="book-card__description">${this.description}</p>\n          <p><strong>${this.currency} ${this.price}</strong></p>\n          <button class="book-card__button">Buy Now</button>\n        </div>\n      `,t}}const i=JSON.parse(localStorage.getItem("shoppingCart"))||[];function n(){localStorage.setItem("shoppingCart",JSON.stringify(i))}function o(){document.querySelector(".cart-count").textContent=i.length}document.addEventListener("DOMContentLoaded",(()=>{new t({containerSelector:".slider_img",dotSelector:".dot",interval:5e3})}));const c=document.querySelector(".books-container"),a=document.querySelector(".load-more");let l=0;async function d(){try{const t=await async function(t,r=6,i=0){const n=`${s}?q=subject:${"Business"}&key=${e}&printType=books&startIndex=${i}&maxResults=${r}&langRestrict=en`;try{const t=await fetch(n);return(await t.json()).items||[]}catch(t){throw console.error("Error fetching books:",t),t}}(0,6,l);t.forEach((t=>{const e=new r({id:t.id,...t.volumeInfo,...t.saleInfo});c.appendChild(e.render())})),document.querySelectorAll(".book-card__button").forEach((t=>{t.addEventListener("click",(e=>{const s=e.target.closest(".book-card").dataset.id;var r;"Buy Now"===t.textContent?(r=s,i.includes(r)||(i.push(r),n()),t.textContent="In Cart",t.classList.add("in-cart")):(function(t){const e=i.indexOf(t);e>-1&&(i.splice(e,1),n())}(s),t.textContent="Buy Now",t.classList.remove("in-cart")),o()}))}))}catch(t){console.error("Error rendering books:",t)}}a.addEventListener("click",(()=>{l+=6,d()})),o(),d()})();