(()=>{"use strict";class t{constructor({containerSelector:t,dotSelector:e,interval:s=5e3}){this.carouselContainer=document.querySelector(t),this.slides=this.carouselContainer.querySelectorAll("img"),this.dots=document.querySelectorAll(e),this.currentIndex=0,this.totalSlides=this.slides.length,this.interval=s,this.timer=null,this.init()}init(){this.updateSlide(0),this.setupEventListeners(),this.startCarousel()}updateSlide(t){this.currentIndex=t,this.carouselContainer.style.transform=`translateX(-${100*this.currentIndex}%)`,this.updateDots()}updateDots(){this.dots.forEach(((t,e)=>{t.classList.toggle("active",e===this.currentIndex)}))}setupEventListeners(){this.dots.forEach((t=>{t.addEventListener("click",(()=>{const e=Number(t.getAttribute("data-index"));this.updateSlide(e),this.resetTimer()}))}))}startCarousel(){this.timer=setInterval((()=>{this.currentIndex=(this.currentIndex+1)%this.totalSlides,this.updateSlide(this.currentIndex)}),this.interval)}stopCarousel(){clearInterval(this.timer)}resetTimer(){this.stopCarousel(),this.startCarousel()}}class e{constructor({id:t,title:e,authors:s,description:n,imageLinks:r,price:i,currencyCode:o,categories:a,ratingsCount:c}){this.id=t,this.title=e,this.authors=s||"Unknown Author",this.description=n||"No description available.",this.image=r?.thumbnail||"https://placehold.co/212x300",this.price=i||"N/A",this.currency=o||"",this.categories=a||[],this.rating=c||0}render(){const t=document.createElement("div");return t.classList.add("book-card"),t.setAttribute("data-id",this.id),t.innerHTML=`\n        <img src="${this.image}" alt="Book cover" class="book-card__image" />\n        <div class="book-card__details">\n          <h3 class="book-card__title">${this.title}</h3>\n          <p class="book-card__authors">${this.authors}</p>\n          <svg width="64" height="12" viewBox="0 0 160 32">\n            <defs>\n              <mask id="perc">\n                <rect x="0" y="0" width="100%" height="100%" fill="white" />\n                // <rect x="48%" y="0" width="100%" height="100%" fill="grey"/>\n              </mask>\n\n              <symbol viewBox="0 0 32 32" id="star">\n                <path d="M31.547 12a.848.848 0 00-.677-.577l-9.427-1.376-4.224-8.532a.847.847 0 00-1.516 0l-4.218 8.534-9.427 1.355a.847.847 0 00-.467 1.467l6.823 6.664-1.612 9.375a.847.847 0 001.23.893l8.428-4.434 8.432 4.432a.847.847 0 001.229-.894l-1.615-9.373 6.822-6.665a.845.845 0 00.214-.869z" />\n              </symbol>\n              <symbol viewBox="0 0 160 32" id="stars">\n                <use xlink:href="#star" x="-64" y="0"></use>\n                <use xlink:href="#star" x="-32" y="0"></use>\n                <use xlink:href="#star" x="0" y="0"></use>\n                <use xlink:href="#star" x="32" y="0"></use>\n                <use xlink:href="#star" x="64" y="0"></use>\n              </symbol>\n            </defs>\n\n            <use xlink:href="#stars" fill="#F2C94C" mask="url(#perc)"></use>\n          </svg>\n          <p class="book-card__description">${this.description}</p>\n          <p class="book-card__price">${this.currency} ${this.price}</p>\n          <button class="book-card__button">Buy Now</button>\n        </div>\n      `,t}}const s=JSON.parse(localStorage.getItem("shoppingCart"))||[];function n(){localStorage.setItem("shoppingCart",JSON.stringify(s))}function r(){const t=document.querySelector(".cart-count");if(!t)return;const e=s.length;e>0?(t.textContent=e,t.style.display="flex"):t.style.display="none"}document.addEventListener("DOMContentLoaded",(()=>{new t({containerSelector:".slider_img",dotSelector:".dot",interval:5e3})}));const i=document.querySelector(".sidebar-menu__container ul"),o=document.querySelector(".books-container"),a=document.querySelector(".load-more");let c="Business",l=0;async function d(){try{const t=await async function(t,e=6,s=0){const n=`https://www.googleapis.com/books/v1/volumes?q=subject:${t}&key=AIzaSyAkmf3qkRoL5lhVfITJvNlcENkhIVVC-74&printType=books&startIndex=${s}&maxResults=${e}&langRestrict=en`;try{const t=await fetch(n);return(await t.json()).items||[]}catch(t){throw console.error("Error fetching books:",t),t}}(c,6,l);console.log("Fetched",t.length,t),t.forEach((t=>{const s=new e({id:t.id,...t.volumeInfo,...t.saleInfo});o.appendChild(s.render())})),document.querySelectorAll(".book-card__button").forEach((t=>{t.addEventListener("click",(e=>{const i=e.target.closest(".book-card").dataset.id;var o;"Buy Now"===t.textContent?(o=i,s.includes(o)||(s.push(o),n()),t.textContent="In Cart",t.classList.add("in-cart")):(function(t){const e=s.indexOf(t);e>-1&&(s.splice(e,1),n())}(i),t.textContent="Buy Now",t.classList.remove("in-cart")),r()}))}))}catch(t){console.error("Error rendering books:",t)}}i.addEventListener("click",(function(t){t.preventDefault();const e=t.target.closest("a");if(!e)return;const s=e.dataset.genre;s&&(c=s,l=0,o.innerHTML="",d())})),a.addEventListener("click",(()=>{l+=6,d()})),r(),d()})();